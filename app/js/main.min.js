import{bindScrollToLinks}from"./scroll.js";import{setupMobileMenu}from"./mobileMenu.js";bindScrollToLinks(),setupMobileMenu(),document.querySelectorAll(".form__agree-figure").forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("active")?(e.classList.remove("active"),e.classList.add("error")):e.classList.contains("error")&&(e.classList.remove("error"),e.classList.add("active"))}))}));const slider=document.querySelector(".steps__list");let startX,scrollLeft,isDown=!1;const deactivate=()=>{isDown=!1,slider.classList.remove("active")};slider.addEventListener("mousedown",(e=>{isDown=!0,slider.classList.add("active"),startX=e.pageX-slider.offsetLeft,scrollLeft=slider.scrollLeft})),slider.addEventListener("mouseleave",deactivate),slider.addEventListener("mouseup",deactivate),slider.addEventListener("mousemove",(e=>{if(!isDown)return;e.preventDefault();const t=e.pageX-slider.offsetLeft-startX;slider.scrollLeft=scrollLeft-t})),document.querySelector(".form__form").addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(this);fetch("php/form.php",{method:"POST",body:t}).then((e=>{if(!e.ok)throw new Error("Сетевая ошибка");return e.json()})).then((e=>{e.success?(document.cookie="redirected=true; path=/; max-age=3600",window.location.href="/thanks"):document.getElementById("responseMessage").innerText="Произошла ошибка при отправке заявки."})).catch((e=>{document.getElementById("responseMessage").innerText="Произошла ошибка: "+e.message}))}));const modal=document.querySelector(".modal");function closeModal(e){e.classList.remove("active"),document.body.classList.remove("active"),document.documentElement.classList.remove("active");document.querySelectorAll("[tabindex]").forEach((e=>{e.removeAttribute("tabindex")}))}modal.addEventListener("click",(function(e){(e.target.classList.contains("modal__close")||e.target.classList.contains("modal__btn"))&&closeModal(modal)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&closeModal(modal)})),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".info__btn"),t=document.querySelector(".info__list"),s=5e3*Math.random()+1e4;setTimeout((()=>{e.classList.add("active")}),s),e.addEventListener("click",(()=>{e.classList.contains("active")&&t.classList.toggle("active")})),document.addEventListener("click",(s=>{t.contains(s.target)||e.contains(s.target)||t.classList.remove("active")}))}));